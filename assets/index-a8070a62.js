import{i as j,r as d,u as w,k as S,j as s,l as E,m as F}from"./index-89c7967e.js";import{c as L,a as u,p as y,n as p,d as N,B as M}from"./PasswordInput.styled-a4901847.js";import{b as R}from"./index.esm-4b14e62e.js";import{F as k,I as q,P as v}from"./FormBox.styled-25209839.js";import{C as B}from"./Container-12183c4d.js";import{S as P,T}from"./Title-7d999692.js";const $=L().shape({email:u().email("Must be valid email").required("Required"),password:u().min(8,"Must be at least 8 characters").max(16,"Must be max 16 characters").matches(y,"Must be at least one capital letter and one number").required("Required")}),A={email:"",password:""},I=()=>{const[h,{isLoading:r,isSuccess:n,isError:l,error:m}]=j(),[t,x]=d.useState(""),f=w(),g=async i=>{const o=await h(i),{user:a,accessToken:e,refreshToken:b}=o.data;x(a.fullName),f(E({user:a,accessToken:e,refreshToken:b})),F(e)},c=S();return d.useEffect(()=>{t&&n&&(c("/"),p.Notify.success(`Glad to see You, ${t}!`,{position:"right-bottom"})),l&&p.Notify.failure(m.data.message,{position:"right-bottom"})},[m,l,n,c,t]),s.jsx(N,{initialValues:A,validationSchema:$,onSubmit:(i,{resetForm:o})=>{const{email:a,password:e}=i;g({email:a.trim(),password:e.trim()}),o()},children:s.jsxs(k,{children:[s.jsx(q,{type:"email",id:"email",label:"Email",placeholder:"example@email.com"}),s.jsx(v,{id:"password",label:"Password",placeholder:"********"}),s.jsx(M,{icon:R,isLoading:r,disabled:r,type:"submit",children:"Login"})]})})},_=()=>s.jsx(B,{children:s.jsxs(P,{children:[s.jsx(T,{children:"Pleas enter your login details"}),s.jsx(I,{})]})}),z=_;export{z as default};
